#
# Setup
# - hosts: all
#   tasks:
#     - name: Gather Facts
#       setup:
#
# Provision Common
- hosts:
    - manager_group
    - worker_servers
  roles:
     - { role: ajsalminen.hosts } #, hosts_additional_hosts:  add_hosts | default ([]) }
     - repos
     - packages 
     - { role: firewalld,
         extra_ports : [
           { zone: "public", protocol: "tcp", port: "2377"},
           { zone: "public", protocol: "tcp", port: "7946"},
           { zone: "public", protocol: "udp", port: "7946"},
           { zone: "public", protocol: "udp", port: "4789"}
         ]
        }
     - docker_ce_centos_install

#
# Provision Manager
- hosts:
    - manager_group
  roles:
     - docker_swarm_manager

#
# Provision workers
- hosts:
    - worker_servers
  roles:
     - docker_swarm_node
